<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#000000">
  <link rel="stylesheet" href="./mycss.css">
  <title>2024新年祝福</title>
  <link rel="icon" type="image/x-icon" href="./favicon.ico">

  <link rel="shortcut icon" type="image/png"
    href="./favicon.ico">
  <link rel="icon" type="image/png"
    href="./favicon.ico">
  <link rel="apple-touch-icon-precomposed"
    href="./favicon.ico">
  <meta name="msapplication-TileColor" content="#000000">
  <meta name="msapplication-TileImage"
    content="./favicon.ico">

</head>

<body>
  <div>
    <ul class="container">
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>   
  </ul>
  </div>

  <!--  -->
<audio src="./newbgm.mp3" autoplay loop></audio>
<div class="wrapper">
  <i class="avatar"></i>
  <textarea id="tx" placeholder="赶快来写下您新年的美好祝福吧！写完记得也来发布一下哦~" rows="2" maxlength="200"></textarea>
  <button><strong>发&nbsp;布</strong></button>
</div>
<div class="wrapper">
  <span class="total">0/200字</span>
</div>
<div class="list">
  <div class="item" style="display: none;">
    <i class="avatar"></i>
    <div class="info">
      <p class="name">新年祝福</p>
      <p class="text" >财富自由，健康快乐，平安幸福</p>
      <p class="time">2024-01-01 00:00:00</p>
    </div>
  </div>
</div>

  <!--  -->
  <div class="slider">
    <div class="slider-wrapper">
      <img src="./images/new01.jpg" alt="" />
    </div>
    <div class="slider-footer">
      <p>2024金龙贺岁，"龘"吉"龘"利</p>
      <ul class="slider-indicator">
        <li class="active"></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
      </ul>
      <div class="toggle">
        <button class="prev">&lt;</button>
        <button class="next">&gt;</button>
      </div>
    </div>
  </div>

<div class="video-btn">
  <a href="../new-year-fireworks/index.html">
  <button class="button" disabled>
    敬请期待168s后...
  <svg fill="currentColor" viewBox="0 0 24 24" class="icon">
    <path clip-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm4.28 10.28a.75.75 0 000-1.06l-3-3a.75.75 0 10-1.06 1.06l1.72 1.72H8.25a.75.75 0 000 1.5h5.69l-1.72 1.72a.75.75 0 101.06 1.06l3-3z" fill-rule="evenodd"></path>
  </svg>
  </button></a>
</div>


  

  <!--  -->
  <script>
    const sliderData = [
      { url: './images/desktop_1.jpg', title: '对人类来说会不会太超前了？', color: 'rgb(53, 29, 25)' },
      { url: './images/desktop_2.jpg', title: '开启剑与雪的黑暗传说！', color: 'rgb(53, 29, 25)' },
      { url: './images/desktop_3.jpg', title: '真正的jo厨出现了！', color: 'rgb(53, 29, 25)' },
      { url: './images/desktop_4.jpg', title: '李玉刚：让世界通过B站看到东方大国文化', color: 'rgb(53, 29, 25)' },
      { url: './images/desktop_5.jpg', title: '快来分享你的寒假日常吧~', color: 'rgb(53, 29, 25)' },
      { url: './images/desktop_6.jpg', title: '哔哩哔哩小年YEAH', color: 'rgb(53, 29, 25)' },
      { url: './images/desktop_7.jpg', title: '一站式解决你的电脑配置问题！！！', color: 'rgb(53, 29, 25)' },
      { url: './images/desktop_8.jpg', title: '谁不想和小猫咪贴贴呢！', color: 'rgb(53, 29, 25)' },
    ]

    const img = document.querySelector('.slider-wrapper img');
    const p = document.querySelector('.slider-footer p');
    const footer = document.querySelector('.slider-footer');

    const next = document.querySelector('.next');
    let i = 0;
    next.addEventListener('click', function (){

      i++;
      if (i >= sliderData.length){
        i = 0;
      }

      toggle();
    });


    const prev = document.querySelector('.prev');

    prev.addEventListener('click', function (){
      // console.log(11);
      i--;
      if (i < 0){
        i = sliderData.length - 1;
      }

      toggle();
    });


 
    function toggle (){
      img.src = sliderData[i].url;
      p.innerHTML = sliderData[i].title;
      footer.style.backgroundColor = sliderData[i].color;

     
      document.querySelector('.slider-indicator .active').classList.remove('active');
      document.querySelector(`.slider-indicator li:nth-child(${i + 1})`).classList.add('active');
    }


    let timerId = setInterval(function (){
      next.click();
    }, 2000);



    const slider = document.querySelector('.slider');
    slider.addEventListener('mouseenter', function (){
      clearInterval(timerId);
    });
    
    slider.addEventListener('mouseleave', function (){
      clearInterval(timerId);
      timerId = setInterval(function (){
      next.click();
    }, 1000);
    });
  </script>


<script>
  const tx = document.querySelector('#tx');
  const total = document.querySelector('.wrapper .total');
  const item = document.querySelector('.list .item');
  const text = document.querySelector('.list .item .text');
  const time = document.querySelector('.list .item .time');
  const button = document.querySelector('.wrapper button');
  const audio = document.querySelector('audio');
  const video_btn = document.querySelector('.video-btn .button');
  let flag = false;

  tx.addEventListener('focus', function (){
    total.style.opacity = 1;
    audio.volume = 0.8;
    audio.play();
    // console.log(audio.volume);
  });

  tx.addEventListener('blur', function (){
    total.style.opacity = 0;
  });

  tx.addEventListener('input', function (){
    total.innerHTML = `${tx.value.length}/200字`;

    flag = false;
  });

  tx.addEventListener('keyup', function (event){
    if (event.key === 'Enter'){
      if (tx.value.trim() != ''){
        item.style.display = 'block';
        text.innerHTML = tx.value;
        flag = true;
      }

      tx.value = '';
      total.innerHTML = '0/200字';
    }
  });


  tx.addEventListener('keyup', function (event){
    if (event.key === 'Enter' && flag){
      time.innerHTML = new Date().toLocaleString();
    }
  });

  button.addEventListener('click', function (event){
    if (tx.value.trim() != ''){
        item.style.display = 'block';
        text.innerHTML = tx.value;
        flag = true;
      }

      tx.value = '';
      total.innerHTML = '0/200字';

    if (event.key = 'click' && flag){
      time.innerHTML = new Date().toLocaleString();
    }
  });


  console.log(video_btn.innerHTML);

  let t = 168;
  let timer1 = setInterval(function () {
    t--;
    video_btn.innerHTML = `敬请期待${t}s后...
  <svg fill="currentColor" viewBox="0 0 24 24" class="icon">
    <path clip-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm4.28 10.28a.75.75 0 000-1.06l-3-3a.75.75 0 10-1.06 1.06l1.72 1.72H8.25a.75.75 0 000 1.5h5.69l-1.72 1.72a.75.75 0 101.06 1.06l3-3z" fill-rule="evenodd"></path>
  </svg>`;
    if (t == 0){
      clearInterval(timer1);
      video_btn.disabled = false;
      video_btn.innerHTML = `点击立即查收
  <svg fill="currentColor" viewBox="0 0 24 24" class="icon">
    <path clip-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm4.28 10.28a.75.75 0 000-1.06l-3-3a.75.75 0 10-1.06 1.06l1.72 1.72H8.25a.75.75 0 000 1.5h5.69l-1.72 1.72a.75.75 0 101.06 1.06l3-3z" fill-rule="evenodd"></path>
  </svg>`;
    }
  }, 1000);


</script>
<!--  -->
  
</body>

</html>